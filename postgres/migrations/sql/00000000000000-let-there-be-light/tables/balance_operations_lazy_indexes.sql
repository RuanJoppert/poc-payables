-- Those indexes depends on Stored Procedures
CREATE INDEX        balance_operations_daily                        ON "BalanceOperations" USING btree (company_id, recipient_id, bo_status_to_varchar(status), date_trunc('day'::text, timezone('America/Sao_Paulo'::text, created_at)));
CREATE INDEX        balance_operations_monthly                      ON "BalanceOperations" USING btree (company_id, recipient_id, bo_status_to_varchar(status), date_trunc('month'::text, timezone('America/Sao_Paulo'::text, created_at)));
CREATE INDEX        balance_operations_weekly                       ON "BalanceOperations" USING btree (company_id, recipient_id, bo_status_to_varchar(status), date_trunc('week'::text, timezone('America/Sao_Paulo'::text, created_at)));
CREATE INDEX        balance_operation_company_recipient_status      ON "BalanceOperations" USING btree (company_id, recipient_id, bo_status_to_varchar(status));
CREATE INDEX        balance_operation_company_recipient_status_date ON "BalanceOperations" USING btree (company_id, recipient_id, bo_status_to_varchar(status), time_to_date(created_at));
CREATE INDEX        balance_operation_company_recipient_status_id   ON "BalanceOperations" USING btree (id, company_id, recipient_id, bo_status_to_varchar(status));
CREATE UNIQUE INDEX balance_operations_uniqueness_lock              ON "BalanceOperations" USING btree (digest((((((((((((((((((((company_id)::text || '-'::text) || (recipient_id)::text) || '-'::text) || amount) || '-'::text) || fee) || '-'::text) || (COALESCE(type, ''::character varying))::text) || '-'::text) || (object_type)::text) || '-'::text) || (object_id)::text) || '-'::text) || (COALESCE(originator_model, ''::character varying))::text) || '-'::text) || (COALESCE(originator_model_id, ''::character varying))::text) || '-'::text) || enum_to_text(status)), 'sha1'::text)) WHERE (created_at > '2016-12-07 00:00:00+00'::timestamp with time zone);
